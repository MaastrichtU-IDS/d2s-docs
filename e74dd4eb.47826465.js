(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{132:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return i})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(7),s=(a(0),a(141)),o=["components"],c={id:"guide-postgres",title:"Setting up PostgreSQL"},l={unversionedId:"guide-postgres",id:"guide-postgres",isDocsHomePage:!1,title:"Setting up PostgreSQL",description:"Run PostgreSQL",source:"@site/docs/guide-postgres.md",slug:"/guide-postgres",permalink:"/docs/guide-postgres",editUrl:"https://github.com/MaastrichtU-IDS/d2s-docs/edit/master/website/docs/guide-postgres.md",version:"current",lastUpdatedBy:"Vincent Emonet",lastUpdatedAt:1655463823,sidebar:"docs",previous:{title:"Setting up Virtuoso",permalink:"/docs/guide-virtuoso"},next:{title:"Setting up MariaDB",permalink:"/docs/guide-mariadb"}},i=[{value:"Run PostgreSQL",id:"run-postgresql",children:[]},{value:"Connect to Postgres and load scripts",id:"connect-to-postgres-and-load-scripts",children:[{value:"Connect to postgres",id:"connect-to-postgres",children:[]},{value:"Load SQL script",id:"load-sql-script",children:[]}]},{value:"Explore database",id:"explore-database",children:[{value:"dbeaver",id:"dbeaver",children:[]},{value:"pgAdmin",id:"pgadmin",children:[]}]},{value:"PSQL commands",id:"psql-commands",children:[{value:"Manage databases",id:"manage-databases",children:[]},{value:"Manage schemas",id:"manage-schemas",children:[]},{value:"Manage tables",id:"manage-tables",children:[]}]}],p={toc:i};function b(e){var t=e.components,a=Object(r.a)(e,o);return Object(s.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"run-postgresql"},"Run PostgreSQL"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"docker run --name d2s-postgres -p 5432:5432 -e POSTGRES_PASSWORD=postgres -d -v $(pwd)/workspace/input:/data postgres:10.4\n")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Shared on your machine at ",Object(s.b)("inlineCode",{parentName:"p"},"workspace/input"))),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Password is ",Object(s.b)("inlineCode",{parentName:"p"},"postgres"))),Object(s.b)("hr",null),Object(s.b)("h2",{id:"connect-to-postgres-and-load-scripts"},"Connect to Postgres and load scripts"),Object(s.b)("h3",{id:"connect-to-postgres"},"Connect to postgres"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"docker exec -it d2s-postgres psql -U postgres\n")),Object(s.b)("h3",{id:"load-sql-script"},"Load SQL script"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"docker exec -it d2s-postgres psql -U postgres db < /data/load_database.sql\n")),Object(s.b)("p",null,"Or execute it directly in the container if the previous command fails:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"docker exec -it d2s-postgres bash\npsql -U postgres db < /data/load_database.sql\n")),Object(s.b)("hr",null),Object(s.b)("h2",{id:"explore-database"},"Explore database"),Object(s.b)("p",null,"Using tools can be helpful to explore the content of your database."),Object(s.b)("h3",{id:"dbeaver"},"dbeaver"),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"https://dbeaver.io/"},"Dbeaver")," is a Eclipse based tool to explore database, it allows to generate diagrams to get an overview of the tables and relations."),Object(s.b)("p",null,"Not available as web UI nor Docker image. Can be installed locally:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"sudo snap install dbeaver-ce\n")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Unfortunately the diagrams can be a challenge to export. They manage to face ",Object(s.b)("inlineCode",{parentName:"p"},"Java Heap Space")," error when generating a png from a ER diagram on 16G machine. How they manage to fail such a simple task is impressing.")),Object(s.b)("h3",{id:"pgadmin"},"pgAdmin"),Object(s.b)("p",null,"The ",Object(s.b)("a",{parentName:"p",href:"https://www.pgadmin.org/"},"official UI for Postgres databases"),". Does not include user-friendly features such as ER diagram generation. But available as web UI in a docker image:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"d2s start pgadmin\n")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Login with ",Object(s.b)("inlineCode",{parentName:"p"},"test@test.edu")," / ",Object(s.b)("inlineCode",{parentName:"p"},"password"))),Object(s.b)("p",null,"Or directly using docker:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"docker run -p 80:80 --net d2s-core_network \\\n    -e 'PGADMIN_DEFAULT_EMAIL=test@test.edu' \\  \n    -e 'PGADMIN_DEFAULT_PASSWORD=password' \\\n    -d dpage/pgadmin4\n")),Object(s.b)("h2",{id:"psql-commands"},"PSQL commands"),Object(s.b)("h3",{id:"manage-databases"},"Manage databases"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-plsql"},"-- List databases\n\\l\n\n-- Connect database\n\\c db\n\n-- Create database\nCREATE DATABASE db;\n")),Object(s.b)("h3",{id:"manage-schemas"},"Manage schemas"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-plsql"},"-- List schemas\n\\dn\n\n-- Choose a schema\nSET search_path TO schema_name;\n")),Object(s.b)("h3",{id:"manage-tables"},"Manage tables"),Object(s.b)("h4",{id:"list-tables"},"List tables"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-plsql"},"\\dt\n")),Object(s.b)("h4",{id:"select-from-table"},"Select from table"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM table_name LIMIT 10; \n")))}b.isMDXComponent=!0},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return g}));var n=a(0),r=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=r.a.createContext({}),p=function(e){var t=r.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},b=function(e){var t=p(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,o=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),b=p(a),u=n,g=b["".concat(o,".").concat(u)]||b[u]||d[u]||s;return a?r.a.createElement(g,c(c({ref:t},i),{},{components:a})):r.a.createElement(g,c({ref:t},i))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,o=new Array(s);o[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var i=2;i<s;i++)o[i]=a[i];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);