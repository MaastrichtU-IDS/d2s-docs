(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),b=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=b(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),s=b(n),d=a,h=s["".concat(p,".").concat(d)]||s[d]||u[d]||o;return n?r.a.createElement(h,l(l({ref:t},c),{},{components:n})):r.a.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,p=new Array(o);p[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,p[1]=l;for(var c=2;c<o;c++)p[c]=n[c];return r.a.createElement.apply(null,p)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},98:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return p})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return b}));var a=n(3),r=n(7),o=(n(0),n(126)),p={title:"Publish Nanopublications",author:"Vincent Emonet",authorURL:"https://vemonet.github.io/"},l={permalink:"/blog/2020/04/13/usecase-nanopublication",source:"@site/blog/2020-04-13-usecase-nanopublication.md",description:"Publish Nanopublications using Nanobench.",date:"2020-04-13T00:00:00.000Z",tags:[],title:"Publish Nanopublications",readingTime:3.9,truncated:!0},i=[{value:"Install the d2s tool",id:"install-the-d2s-tool",children:[]},{value:"Start Nanobench",id:"start-nanobench",children:[]},{value:"Complete your profile",id:"complete-your-profile",children:[]},{value:"Publish your first nanopublications",id:"publish-your-first-nanopublications",children:[]},{value:"Create a new template",id:"create-a-new-template",children:[{value:"Define the template",id:"define-the-template",children:[]},{value:"Publish the template",id:"publish-the-template",children:[]}]}],c={toc:i};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Publish ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://nanopub.org/"}),"Nanopublications")," using ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/peta-pico/nanobench"}),"Nanobench"),"."),Object(o.b)("h2",{id:"install-the-d2s-tool"},"Install the d2s tool"),Object(o.b)("p",null,"See the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://d2s.semanticscience.org/docs/d2s-installation"}),"complete installation documentation")," to install pip, ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://pipxproject.github.io/pipx/"}),"pipx")," and Docker using ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://chocolatey.org/"}),"Chocolatey"),". "),Object(o.b)("p",null,"Then  install the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://pypi.org/project/d2s/"}),"d2s tool")," using pipx or pip:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"pipx install d2s cwlref-runner\nd2s init my-project-folder\ncd my-project-folder\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"We recommend using ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://pipxproject.github.io/pipx/"}),"pipx"),", but you can use ",Object(o.b)("inlineCode",{parentName:"p"},"pip")," or ",Object(o.b)("inlineCode",{parentName:"p"},"pip3")," depending on your preferences.")),Object(o.b)("p",null,"You will not need the GraphDB installation file for this tutorial. So you can leave it blank when asked."),Object(o.b)("h2",{id:"start-nanobench"},"Start Nanobench"),Object(o.b)("p",null,"We will use the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/peta-pico/nanobench"}),"Nanobench")," web service to publish ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://nanopub.org/"}),"Nanopublications"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"d2s start nanobench\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Access on http://localhost:37373")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"See ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/peta-pico/nanobench/blob/master/INSTALL-with-Docker.md"}),"official documentation for Docker"),".")),Object(o.b)("p",null,"Alternatively Nanobench can be run directly using ",Object(o.b)("inlineCode",{parentName:"p"},"docker run")," if ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://pypi.org/project/d2s/"}),"d2s")," is not installed"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"docker run -d --rm --name nanobench -p 37373:37373 \\\n  -v $(pwd)/workspace/.nanopub:/root/.nanopub \\\n  -e NANOBENCH_API_INSTANCES=http://grlc.np.dumontierlab.com/api/local/local/ http://grlc.nanopubs.lod.labs.vu.nl/api/local/local/ http://130.60.24.146:7881/api/local/local/ \\\n  nanopub/nanobench\n")),Object(o.b)("h2",{id:"complete-your-profile"},"Complete your profile"),Object(o.b)("p",null,"Follow the instructions provided by the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://localhost:37373/"}),"locally deployed Nanobench web UI")," to complete your profile, and publish your first nanopublication:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Provide your ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://orcid.org"}),"ORCID")," identifier. If you don't have one you can create an account at ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://orcid.org"}),"https://orcid.org"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"You will then be prompted to create you ",Object(o.b)("inlineCode",{parentName:"p"},"Keys for Digital Signatures"),". Those keys are stored in ",Object(o.b)("inlineCode",{parentName:"p"},"workspace/.nanopub/id_rsa"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"To finish, ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://localhost:37373/orcidlinking"}),"link your ORCID account")," to prove you are the rightful owner (follow the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://localhost:37373/orcidlinking"}),"Nanobench web UI instructions"),")"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Keep the URL generated for your first nanopublication. It should starts with ",Object(o.b)("inlineCode",{parentName:"li"},"http://purl.org/np/"))))),Object(o.b)("h2",{id:"publish-your-first-nanopublications"},"Publish your first nanopublications"),Object(o.b)("p",null,"Follow the tutorial from the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://localhost:37373/"}),"locally deployed Nanobench web UI")," to publish your first nanopublications to the Maastricht University Institute of Data Science and and the official Nanopub servers! "),Object(o.b)("p",null,"Feel free to publish new nanopublications anytime you want \ud83d\udce2"),Object(o.b)("h2",{id:"create-a-new-template"},"Create a new template"),Object(o.b)("p",null,"We will now create a new template to ",Object(o.b)("strong",{parentName:"p"},"describe a dataset that has a publicly available SPARQL endpoint"),"."),Object(o.b)("p",null,"To create a new template we will need to use ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Nanopublication/nanopub-java"}),"Nanopub-java")," to publish a Nanopublication from an arbitrary number of triples, instead of Nanobench."),Object(o.b)("h3",{id:"define-the-template"},"Define the template"),Object(o.b)("p",null,"We defined the template to let the user describe 4 properties:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"title"),Object(o.b)("li",{parentName:"ul"},"description"),Object(o.b)("li",{parentName:"ul"},"homepage"),Object(o.b)("li",{parentName:"ul"},"SPARQL endpoint URL")),Object(o.b)("p",null,"Additionally the type ",Object(o.b)("inlineCode",{parentName:"p"},"dcat:Dataset")," is used to describe the generated entity."),Object(o.b)("p",null,"The template is defined in TRiG format (similar to Turtle):"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-turtle"}),'@prefix : <http://purl.org/nanopub/temp/template-boilerplate_> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix dct: <http://purl.org/dc/terms/> .\n@prefix prov: <http://www.w3.org/ns/prov#> .\n@prefix np: <http://www.nanopub.org/nschema#> .\n@prefix orcid: <https://orcid.org/> .\n@prefix nt: <https://w3id.org/np/o/ntemplate/> .\n@prefix npx: <http://purl.org/nanopub/x/> .\n@prefix dcat: <http://www.w3.org/ns/dcat#> .\n@prefix dctypes: <http://purl.org/dc/dcmitype/> .\n@prefix void: <http://rdfs.org/ns/void#> .\n@prefix foaf: <http://xmlns.com/foaf/0.1/> .\n:Head {\n  : np:hasAssertion :assertion ;\n    np:hasProvenance :provenance ;\n    np:hasPublicationInfo :pubinfo ;\n    a np:Nanopublication .\n}\n:assertion {\n  :assertion a nt:AssertionTemplate ;\n    rdfs:label "Describe a dataset with a SPARQL endpoint" ;\n    nt:hasStatement :st0 , :st1 , :st2 , :st3 , :st4 .\n  :title a nt:LiteralPlaceholder ;\n    rdfs:label "add the name of the dataset here" .\n  :description a nt:LiteralPlaceholder ;\n    rdfs:label "add the description of the dataset here" .\n  :homepage a nt:UriPlaceholder ;\n    rdfs:label "add the URL to the dataset homepage here" .\n  :sparqlEndpoint a nt:UriPlaceholder ;\n    rdfs:label "add the URL to the dataset SPARQL endpoint here" .\n  :dataset a nt:LocalResource ;\n    rdfs:label "This dataset" .\n  :st0 rdf:object dctypes:Dataset ;\n    rdf:predicate rdf:type ;\n    rdf:subject :dataset ;\n    a rdf:Statement ;\n    nt:statementOrder 0 .\n  :st1 rdf:object :title ;\n    rdf:predicate dct:title ;\n    rdf:subject :dataset ;\n    a rdf:Statement ;\n    nt:statementOrder 1 .\n  :st2 rdf:object :description ;\n    rdf:predicate dct:description ;\n    rdf:subject :dataset ;\n    a rdf:Statement ;\n    nt:statementOrder 2 .\n  :st3 rdf:object :homepage ;\n    rdf:predicate foaf:page ;\n    rdf:subject :dataset ;\n    a rdf:Statement ;\n    nt:statementOrder 3 .\n  :st4 rdf:object :sparqlEndpoint ;\n    rdf:predicate void:sparqlEndpoint ;\n    rdf:subject :dataset ;\n    a rdf:Statement ;\n    nt:statementOrder 4 .\n  dct:title rdfs:label "has name" .\n  dct:description rdfs:label "has description" .\n  foaf:page rdfs:label "has homepage" .\n  void:sparqlEndpoint rdfs:label "has SPARQL endpoint URL" .\n  rdf:type rdfs:label "is a" .\n  dctypes:Dataset rdfs:label "Dataset" .\n}\n:provenance {\n  :assertion prov:wasAttributedTo orcid:0000-0002-1501-1082 .\n}\n:pubinfo {\n  : dct:created "2020-04-14T13:13:44.817+01:00"^^xsd:dateTime ;\n    dct:creator orcid:0000-0002-1501-1082 .\n}\n')),Object(o.b)("p",null,"Copy this template to a file named ",Object(o.b)("inlineCode",{parentName:"p"},"nanopub.trig")," in the project root folder."),Object(o.b)("h3",{id:"publish-the-template"},"Publish the template"),Object(o.b)("p",null,"Copy the ",Object(o.b)("inlineCode",{parentName:"p"},"id_rsa")," key file generated by Nanobench  to your home"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"cp -r workspace/.nanopub ~/.nanopub\n")),Object(o.b)("p",null,"Sign the ",Object(o.b)("inlineCode",{parentName:"p"},"nanopub.trig")," in the current folder using ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://hub.docker.com/repository/docker/umids/nanopub-java"}),"nanopub-java image from DockerHub"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"docker run -it --rm -v ~/.nanopub:/root/.nanopub -v $(pwd):/data umids/nanopub-java sign /data/nanopub.trig\n")),Object(o.b)("p",null,"It should generate a ",Object(o.b)("inlineCode",{parentName:"p"},"signed.nanopub.trig"),", you can now publish it:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"docker run -it --rm -v ~/.nanopub:/root/.nanopub -v $(pwd):/data umids/nanopub-java publish /data/signed.nanopub.trig\n")),Object(o.b)("p",null,"Our template can now be used at http://localhost:37373/publish?22&template=",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://purl.org/np/RAVF_WDsJRkRXXWgaJx5p9EnjLIguIv0-GqDlbfBtBPcQ"}),"http://purl.org/np/RAVF_WDsJRkRXXWgaJx5p9EnjLIguIv0-GqDlbfBtBPcQ")," "),Object(o.b)("p",null,"See an example of a nanopub generated using this template to describe the Bio2RDF biomedical dataset: ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://server.nanopubs.lod.labs.vu.nl/RAjqGxG3uPcnpa7RA1h-QiSnGZqRhnQNCboV4bl-Vj0m8"}),"http://server.nanopubs.lod.labs.vu.nl/RAjqGxG3uPcnpa7RA1h-QiSnGZqRhnQNCboV4bl-Vj0m8")," "),Object(o.b)("p",null,"Feel free to add more datasets or create new templates!"))}b.isMDXComponent=!0}}]);